{"version":3,"sources":["dummydb/headerAccountCsv.js","dummydb/role1.js","component/quanlytaikhoan/chucnangkhac.jsx"],"names":["headerAccount","label","key","listRole1","value","Chucnangkhac","props","useState","valueRole","setValueRole","enqueueSnackbar","useSnackbar","datas","setDatas","datasExport","setDatasExport","counts","setCounts","page","setPage","LIMIT_PAGE_DEFAULT","limit","setLimit","match","useRouteMatch","csvReport","filename","headers","data","handleExport","a","variant","useEffect","fetchData","params","role","offset","userApi","getFilter","list","accounts","paramsCount","count","className","TextField","name","margin","fullWidth","select","onChange","event","target","map","option","MenuItem","style","width","padding","length","index","Id","fullname","email","status","to","url","FormOutlined","color","fontWeight","fontStyle","fontSize","description","image","pageSize","total","pageSizeOptions","float","marginRight","Button","marginLeft","background","onClick"],"mappings":"6FAAA,kCAAO,IAAMA,EAAgB,CAC3B,CAAEC,MAAO,KAAMC,IAAK,MACpB,CAAED,MAAO,WAAYC,IAAK,YAC1B,CAAED,MAAO,WAAYC,IAAK,YAC1B,CAAED,MAAO,OAAQC,IAAK,QACtB,CAAED,MAAO,QAASC,IAAK,SACvB,CAAED,MAAO,SAAUC,IAAK,UACxB,CAAED,MAAO,YAAaC,IAAK,aAC3B,CAAED,MAAO,WAAYC,IAAK,YAC1B,CAAED,MAAO,QAASC,IAAK,SACvB,CAAED,MAAO,UAAWC,IAAK,WACzB,CAAED,MAAO,OAAQC,IAAK,QACtB,CAAED,MAAO,WAAYC,IAAK,YAC1B,CAAED,MAAO,aAAcC,IAAK,cAC5B,CAAED,MAAO,SAAUC,IAAK,Y,2MCdbC,EAAY,CACvB,CACEC,MAAO,aACPH,MAAO,qCAET,CACEG,MAAO,UACPH,MAAO,sCAET,CACEG,MAAO,aACPH,MAAO,+B,eCgLII,UA9Kf,SAAsBC,GACpB,MAAkCC,mBAAS,cAA3C,mBAAOC,EAAP,KAAkBC,EAAlB,KACQC,EAAoBC,cAApBD,gBACR,EAA0BH,mBAAS,IAAnC,mBAAOK,EAAP,KAAcC,EAAd,KACA,EAAsCN,mBAAS,IAA/C,mBAAOO,EAAP,KAAoBC,EAApB,KAEA,EAA4BR,mBAAS,GAArC,mBAAOS,EAAP,KAAeC,EAAf,KACA,EAAwBV,mBAAS,GAAjC,mBAAOW,EAAP,KAAaC,EAAb,KACA,EAA0BZ,mBAASa,KAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACMC,EAAQC,cACRC,EAAY,CAChBC,SAAU,cACVC,QAAS3B,IACT4B,KAAMd,GAEFe,EAAY,uCAAG,sBAAAC,EAAA,sDACnBpB,EAAgB,UAAW,CACzBqB,QAAS,YAFQ,2CAAH,qDAyDlB,OApDAC,qBAAU,WACR,IAAMC,EAAS,uCAAG,8BAAAH,EAAA,sEAERI,EAAS,CACbC,KAAM3B,EACNa,MAAO,SACPe,OAAQ,GALI,SAOKC,IAAQC,UAAUJ,GAPvB,OAORK,EAPQ,OAQdxB,EAAewB,EAAKC,UARN,gDAUd9B,EAAgB,QAAS,CACvBqB,QAAS,UAXG,yDAAH,qDAefE,MAEC,CAACzB,EAAWa,EAAOH,IACtBc,qBAAU,WACR,IAAMC,EAAS,uCAAG,kCAAAH,EAAA,sEAERW,EAAc,CAClBN,KAAM3B,GAEF0B,EAAS,CACbC,KAAM3B,EACNa,MAAOA,EACPe,OAAiB,IAATlB,EAAa,GAAKA,EAAO,GAAKG,GAR1B,SAUMgB,IAAQK,MAAMD,GAVpB,cAURC,EAVQ,OAWdzB,EAAUyB,GAXI,SAYKL,IAAQC,UAAUJ,GAZvB,OAYRK,EAZQ,OAad1B,EAAS0B,EAAKC,UAbA,kDAed9B,EAAgB,QAAS,CACvBqB,QAAS,UAhBG,0DAAH,qDAoBfE,MAEC,CAACzB,EAAWa,EAAOH,IAWpB,gCACE,sBAAKyB,UAAU,yBAAf,UACE,8BACE,qBAAKA,UAAU,gBAAf,SACE,qBAAKA,UAAU,uBAAf,SACE,cAACC,EAAA,EAAD,CACEC,KAAK,OACLF,UAAU,iBACVZ,QAAQ,WACRe,OAAO,QACPC,WAAS,EACTC,QAAM,EACN5C,MAAOI,EACPyC,SAtBW,SAACC,GACxBzC,EAAayC,EAAMC,OAAO/C,QAahB,SAUGD,EAAUiD,KAAI,SAACC,GAAD,OACb,cAACC,EAAA,EAAD,CAA6BlD,MAAOiD,EAAOjD,MAA3C,SACGiD,EAAOpD,OADKoD,EAAOjD,kBAQhC,uBACA,qBAAKuC,UAAU,eAAf,SACE,wBAAOY,MAAO,CAAEC,MAAO,OAAQC,QAAS,QAAxC,UACG7C,EAAM8C,OAAS,GACd,+BACE,yDACA,sDACA,uCACA,sEACA,kDAGH9C,GACCA,EAAMwC,KAAI,SAACxB,EAAM+B,GAAP,OACR,+BACE,6BAAK/B,EAAKgC,KACV,6BAAKhC,EAAKiC,WACV,6BAAKjC,EAAKkC,QACV,6BACmB,IAAhBlC,EAAKmC,OAAe,qCAAmB,sCAE1C,oBAAIpB,UAAU,UAAd,SACE,cAAC,IAAD,CAAMqB,GAAE,UAAKzC,EAAM0C,IAAX,YAAkBrC,EAAKgC,IAA/B,SACE,cAACM,EAAA,EAAD,cAKQ,IAAjBtD,EAAM8C,QACL,cAAC,IAAD,CACEH,MAAO,CACLY,MAAO,MACPC,WAAY,MACZC,UAAW,SACXC,SAAU,QAEZC,YAAY,UACZC,MAAM,yEAKd,uBACA,uBACA,uBACC5D,EAAM8C,OAAS,GACd,cAAC,IAAD,CACEe,SAAUpD,EACVqD,MAAO1D,EACPE,KAAMA,EACN+B,SAhF0B,SAAC/B,EAAMG,GACzCF,EAAQD,GACRI,EAASD,IA+EDsD,gBAAiB,CAAC,EAAG,GAAI,GAAI,IAC7BpB,MAAO,CAAEqB,MAAO,QAASC,YAAa,aAI3CjE,EAAM8C,OAAS,GACd,cAAC,UAAD,2BAAajC,GAAb,aACE,cAACqD,EAAA,EAAD,CACEvB,MAAO,CACLC,MAAO,QACPuB,WAAY,OACZX,WAAY,MACZY,WAAY,mBACZb,MAAO,SAETpC,QAAQ,YACRkD,QAASpD,EATX","file":"static/js/21.04797107.chunk.js","sourcesContent":["export const headerAccount = [\n  { label: \"Id\", key: \"Id\" },\n  { label: \"fullname\", key: \"fullname\" },\n  { label: \"birthday\", key: \"birthday\" },\n  { label: \"cmnd\", key: \"cmnd\" },\n  { label: \"email\", key: \"email\" },\n  { label: \"gender\", key: \"gender\" },\n  { label: \"maxcredit\", key: \"maxcredit\" },\n  { label: \"password\", key: \"password\" },\n  { label: \"phone\", key: \"phone\" },\n  { label: \"program\", key: \"program\" },\n  { label: \"role\", key: \"role\" },\n  { label: \"schoolId\", key: \"schoolId\" },\n  { label: \"schoolyear\", key: \"schoolyear\" },\n  { label: \"status\", key: \"status\" },\n];\n","export const listRole1 = [\n  {\n    value: \"ROLE_ADMIN\",\n    label: \"Quản lý tài khoản\",\n  },\n  {\n    value: \"ROLE_TM\",\n    label: \"Quản lý học phần\",\n  },\n  {\n    value: \"ROLE_GUEST\",\n    label: \"Tài khoản khách\",\n  },\n];\n","import { FormOutlined } from \"@ant-design/icons\";\nimport { Button, MenuItem, TextField } from \"@material-ui/core\";\nimport { Empty, Pagination } from \"antd\";\nimport { useSnackbar } from \"notistack\";\nimport React, { useEffect, useState } from \"react\";\nimport { CSVLink } from \"react-csv\";\nimport { Link, useRouteMatch } from \"react-router-dom\";\nimport userApi from \"../../api/userApi\";\nimport { LIMIT_PAGE_DEFAULT } from \"../../dummydb/dataDefault\";\nimport { headerAccount } from \"../../dummydb/headerAccountCsv\";\nimport { listRole1 } from \"../../dummydb/role1\";\nimport \"../style2.css\";\n\nfunction Chucnangkhac(props) {\n  const [valueRole, setValueRole] = useState(\"ROLE_ADMIN\");\n  const { enqueueSnackbar } = useSnackbar();\n  const [datas, setDatas] = useState([]);\n  const [datasExport, setDatasExport] = useState([]);\n\n  const [counts, setCounts] = useState(0);\n  const [page, setPage] = useState(1);\n  const [limit, setLimit] = useState(LIMIT_PAGE_DEFAULT);\n  const match = useRouteMatch();\n  const csvReport = {\n    filename: \"exports.csv\",\n    headers: headerAccount,\n    data: datasExport,\n  };\n  const handleExport = async () => {\n    enqueueSnackbar(\"Success\", {\n      variant: \"success\",\n    });\n  };\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const params = {\n          role: valueRole,\n          limit: 99999999,\n          offset: 0,\n        };\n        const list = await userApi.getFilter(params);\n        setDatasExport(list.accounts);\n      } catch (error) {\n        enqueueSnackbar(\"Error\", {\n          variant: \"error\",\n        });\n      }\n    };\n    fetchData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [valueRole, limit, page]);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const paramsCount = {\n          role: valueRole,\n        };\n        const params = {\n          role: valueRole,\n          limit: limit,\n          offset: page === 1 ? 0 : (page - 1) * limit,\n        };\n        const count = await userApi.count(paramsCount);\n        setCounts(count);\n        const list = await userApi.getFilter(params);\n        setDatas(list.accounts);\n      } catch (error) {\n        enqueueSnackbar(\"Error\", {\n          variant: \"error\",\n        });\n      }\n    };\n    fetchData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [valueRole, limit, page]);\n\n  const handleChangeRole = (event) => {\n    setValueRole(event.target.value);\n  };\n  const handleChangePageAndPageSize = (page, limit) => {\n    setPage(page);\n    setLimit(limit);\n  };\n\n  return (\n    <div>\n      <div className=\"quanlysinhvien-content\">\n        <div>\n          <div className=\"filter-school\">\n            <div className=\"filter-school-right2\">\n              <TextField\n                name=\"role\"\n                className=\"outlined-basic\"\n                variant=\"outlined\"\n                margin=\"dense\"\n                fullWidth\n                select\n                value={valueRole}\n                onChange={handleChangeRole}\n              >\n                {listRole1.map((option) => (\n                  <MenuItem key={option.value} value={option.value}>\n                    {option.label}\n                  </MenuItem>\n                ))}\n              </TextField>\n            </div>\n          </div>\n        </div>\n        <br />\n        <div className=\"table-dangki\">\n          <table style={{ width: \"100%\", padding: \"10px\" }}>\n            {datas.length > 0 && (\n              <tr>\n                <th>Mã tài khoản</th>\n                <th>Họ và tên</th>\n                <th>Email</th>\n                <th>Trạng thái tài khoản</th>\n                <th>Chi tiết</th>\n              </tr>\n            )}\n            {datas &&\n              datas.map((data, index) => (\n                <tr>\n                  <td>{data.Id}</td>\n                  <td>{data.fullname}</td>\n                  <td>{data.email}</td>\n                  <td>\n                    {data.status === 1 ? \"Đang hoạt động\" : \"Không hoạt động\"}\n                  </td>\n                  <td className=\"chitiet\">\n                    <Link to={`${match.url}/${data.Id}`}>\n                      <FormOutlined />\n                    </Link>\n                  </td>\n                </tr>\n              ))}\n            {datas.length === 0 && (\n              <Empty\n                style={{\n                  color: \"red\",\n                  fontWeight: \"600\",\n                  fontStyle: \"italic\",\n                  fontSize: \"13px\",\n                }}\n                description=\"(Empty)\"\n                image=\"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg\"\n              />\n            )}\n          </table>\n        </div>\n        <br />\n        <br />\n        <br />\n        {datas.length > 0 && (\n          <Pagination\n            pageSize={limit}\n            total={counts}\n            page={page}\n            onChange={handleChangePageAndPageSize}\n            pageSizeOptions={[5, 10, 15, 20]}\n            style={{ float: \"right\", marginRight: \"15px\" }}\n          />\n        )}\n      </div>\n      {datas.length > 0 && (\n        <CSVLink {...csvReport}>\n          <Button\n            style={{\n              width: \"200px\",\n              marginLeft: \"10px\",\n              fontWeight: \"400\",\n              background: \"rgb(235, 43, 43)\",\n              color: \"white\",\n            }}\n            variant=\"contained\"\n            onClick={handleExport}\n          >\n            Export file excel\n          </Button>\n        </CSVLink>\n      )}\n    </div>\n  );\n}\n\nexport default Chucnangkhac;\n"],"sourceRoot":""}