{"version":3,"sources":["component/quanlylophoc/thietlapdangki.jsx"],"names":["Thietlapdangki","props","enqueueSnackbar","useSnackbar","schema","yup","shape","form","useForm","defaultValues","start_time","end_time","start_time1","end_time1","start_time2","end_time2","start_time3","end_time3","start_time4","end_time4","start_time5","end_time5","resolver","yupResolver","register","handleSubmit","setValue","useEffect","fetchOte","a","classApi","getOte","data","console","log","timeframe","first_year","fourth_year","last_year","second_year","third_year","handleOnSubmit","value","time","updateOte","variant","response","detail","className","onSubmit","style","fontSize","margin","id","label","type","sx","width","InputLabelProps","shrink","marginLeft","marginTop","fontWeight","background","color","Thietlapkihoc","useState","semesterRes","setSemesterRes","semesterUpdate","setSemesterUpdate","semester","getSemesterRegister","params","updateSemesterRegister","reset","display","placeholder"],"mappings":"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","file":"static/js/24.c970e80a.chunk.js","sourcesContent":["import { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport { Button, TextField } from \"@material-ui/core\";\r\nimport { useSnackbar } from \"notistack\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport * as yup from \"yup\";\r\nimport classApi from \"../../api/classApi\";\r\nfunction Thietlapdangki(props) {\r\n  const { enqueueSnackbar } = useSnackbar();\r\n  const schema = yup.object().shape({});\r\n  const form = useForm({\r\n    defaultValues: {\r\n      start_time: \"2017-05-24T10:30\",\r\n      end_time: \"2017-05-24T10:30\",\r\n      start_time1: \"T10:30\",\r\n      end_time1: \"T10:30\",\r\n      start_time2: \"T10:30\",\r\n      end_time2: \"T10:30\",\r\n      start_time3: \"T10:30\",\r\n      end_time3: \"T10:30\",\r\n      start_time4: \"T10:30\",\r\n      end_time4: \"T10:30\",\r\n      start_time5: \"T10:30\",\r\n      end_time5: \"T10:30\",\r\n    },\r\n    resolver: yupResolver(schema),\r\n  });\r\n  const { register, handleSubmit, setValue } = form;\r\n\r\n  useEffect(() => {\r\n    const fetchOte = async () => {\r\n      const data = await classApi.getOte();\r\n      console.log(\"data\", data);\r\n      setValue(\"start_time\", `${data.start_time}`);\r\n      setValue(\"end_time\", `${data.end_time}`);\r\n      setValue(\"start_time1\", `${data.timeframe.first_year.start_time}`);\r\n      setValue(\"end_time1\", `${data.timeframe.first_year.end_time}`);\r\n      setValue(\"start_time4\", `${data.timeframe.fourth_year.start_time}`);\r\n      setValue(\"end_time4\", `${data.timeframe.fourth_year.end_time}`);\r\n      setValue(\"start_time5\", `${data.timeframe.last_year.start_time}`);\r\n      setValue(\"end_time5\", `${data.timeframe.last_year.end_time}`);\r\n      setValue(\"start_time2\", `${data.timeframe.second_year.start_time}`);\r\n      setValue(\"end_time2\", `${data.timeframe.second_year.end_time}`);\r\n      setValue(\"start_time3\", `${data.timeframe.third_year.start_time}`);\r\n      setValue(\"end_time3\", `${data.timeframe.third_year.end_time}`);\r\n    };\r\n    fetchOte();\r\n  }, [setValue]);\r\n  const handleOnSubmit = async (value) => {\r\n    try {\r\n      const time = {\r\n        start_time: value.start_time,\r\n        end_time: value.end_time,\r\n        timeframe: {\r\n          first_year: {\r\n            start_time: value.start_time1,\r\n            end_time: value.end_time1,\r\n          },\r\n          second_year: {\r\n            start_time: value.start_time2,\r\n            end_time: value.end_time2,\r\n          },\r\n          third_year: {\r\n            start_time: value.start_time3,\r\n            end_time: value.end_time3,\r\n          },\r\n          fourth_year: {\r\n            start_time: value.start_time4,\r\n            end_time: value.end_time4,\r\n          },\r\n          last_year: {\r\n            start_time: value.start_time5,\r\n            end_time: value.end_time5,\r\n          },\r\n        },\r\n      };\r\n      const data = await classApi.updateOte(time);\r\n      if (data === true) {\r\n        enqueueSnackbar(\"success\", {\r\n          variant: \"success\",\r\n        });\r\n      }\r\n    } catch (error) {\r\n      enqueueSnackbar(error.response.data.detail, {\r\n        variant: \"error\",\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"thongtincanhan\">\r\n      <form onSubmit={handleSubmit(handleOnSubmit)}>\r\n        <div className=\"thongtincanhan-title\" style={{ fontSize: \"15px\" }}>\r\n          1. Thiết lập thời gian đăng kí học tập\r\n        </div>\r\n        <div style={{ margin: \"20px\" }}>\r\n          <TextField\r\n            id=\"datetime-local\"\r\n            label=\"Thời gian bắt đầu\"\r\n            type=\"datetime-local\"\r\n            {...register(\"start_time\")}\r\n            sx={{ width: 250 }}\r\n            InputLabelProps={{\r\n              shrink: true,\r\n            }}\r\n          />\r\n          <TextField\r\n            style={{ marginLeft: \"70px\" }}\r\n            id=\"datetime-local\"\r\n            label=\"Thời gian kết thúc\"\r\n            {...register(\"end_time\")}\r\n            type=\"datetime-local\"\r\n            sx={{ width: 250 }}\r\n            InputLabelProps={{\r\n              shrink: true,\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"thongtincanhan-title\" style={{ fontSize: \"15px\" }}>\r\n          2. Thiết lập khung thời gian đăng kí cho sinh viên các khóa\r\n        </div>\r\n\r\n        <div className=\"table-thietlap\">\r\n          <div className=\"thietlap-left\">Năm nhất:</div>\r\n          <div className=\"thietlap-right\">\r\n            <TextField\r\n              label=\"Bắt đầu\"\r\n              type=\"time\"\r\n              {...register(\"start_time1\")}\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              sx={{ width: 150 }}\r\n            />\r\n            <TextField\r\n              style={{ marginLeft: \"30px\" }}\r\n              label=\"Kết thúc\"\r\n              type=\"time\"\r\n              {...register(\"end_time1\")}\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              sx={{ width: 150 }}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"table-thietlap\">\r\n          <div className=\"thietlap-left\">Năm hai</div>\r\n          <div className=\"thietlap-right\">\r\n            <TextField\r\n              label=\"Bắt đầu\"\r\n              type=\"time\"\r\n              {...register(\"start_time2\")}\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              sx={{ width: 150 }}\r\n            />\r\n            <TextField\r\n              style={{ marginLeft: \"30px\" }}\r\n              label=\"Kết thúc\"\r\n              type=\"time\"\r\n              {...register(\"end_time2\")}\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              sx={{ width: 150 }}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"table-thietlap\">\r\n          <div className=\"thietlap-left\">Năm ba:</div>\r\n          <div className=\"thietlap-right\">\r\n            <TextField\r\n              label=\"Bắt đầu\"\r\n              type=\"time\"\r\n              {...register(\"start_time3\")}\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              sx={{ width: 150 }}\r\n            />\r\n            <TextField\r\n              style={{ marginLeft: \"30px\" }}\r\n              label=\"Kết thúc\"\r\n              type=\"time\"\r\n              {...register(\"end_time3\")}\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              sx={{ width: 150 }}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"table-thietlap\">\r\n          <div className=\"thietlap-left\">Năm tư:</div>\r\n          <div className=\"thietlap-right\">\r\n            <TextField\r\n              label=\"Bắt đầu\"\r\n              type=\"time\"\r\n              {...register(\"start_time4\")}\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              sx={{ width: 150 }}\r\n            />\r\n            <TextField\r\n              style={{ marginLeft: \"30px\" }}\r\n              label=\"Kết thúc\"\r\n              type=\"time\"\r\n              {...register(\"end_time4\")}\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              sx={{ width: 150 }}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"table-thietlap\">\r\n          <div className=\"thietlap-left\">Năm cuối:</div>\r\n          <div className=\"thietlap-right\">\r\n            <TextField\r\n              label=\"Bắt đầu\"\r\n              type=\"time\"\r\n              {...register(\"start_time5\")}\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              sx={{ width: 150 }}\r\n            />\r\n            <TextField\r\n              style={{ marginLeft: \"30px\" }}\r\n              label=\"Kết thúc\"\r\n              type=\"time\"\r\n              {...register(\"end_time5\")}\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              sx={{ width: 150 }}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <Button\r\n            style={{\r\n              width: \"200px\",\r\n              marginTop: \"40px\",\r\n              marginLeft: \"20px\",\r\n              fontWeight: \"400\",\r\n              background: \"rgb(235, 43, 43)\",\r\n              color: \"white\",\r\n            }}\r\n            variant=\"contained\"\r\n            type=\"submit\"\r\n          >\r\n            Thiết lập\r\n          </Button>\r\n        </div>\r\n      </form>\r\n      <Thietlapkihoc />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Thietlapdangki;\r\nexport const Thietlapkihoc = () => {\r\n  const [semesterRes, setSemesterRes] = useState(0);\r\n  const [semesterUpdate, setSemesterUpdate] = useState();\r\n  const { enqueueSnackbar } = useSnackbar();\r\n  const schema = yup.object().shape({});\r\n  const form = useForm({\r\n    defaultValues: {\r\n      semester: \"\",\r\n    },\r\n    resolver: yupResolver(schema),\r\n  });\r\n  const { register, handleSubmit } = form;\r\n\r\n  useEffect(() => {\r\n    const fetchOte = async () => {\r\n      const data = await classApi.getSemesterRegister();\r\n      setSemesterRes(data);\r\n    };\r\n    fetchOte();\r\n  }, [semesterUpdate]);\r\n  const handleOnSubmit = async (value) => {\r\n    try {\r\n      const params = {\r\n        semester: value.semester,\r\n      };\r\n      const data = await classApi.updateSemesterRegister(params);\r\n      if (data === true) {\r\n        setSemesterUpdate(value.semester);\r\n        form.reset();\r\n        enqueueSnackbar(\"success\", {\r\n          variant: \"success\",\r\n        });\r\n      }\r\n    } catch (error) {\r\n      enqueueSnackbar(error.response.data.detail, {\r\n        variant: \"error\",\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"thongtincanhan\">\r\n      <div className=\"thongtincanhan-title\" style={{ fontSize: \"15px\" }}>\r\n        2. Thiết lập kì học đăng kí\r\n      </div>\r\n      <div style={{ margin: \"21px\", fontSize: \"15px\", fontWeight: \"600\" }}>\r\n        +) Kì đăng kí hiện tại là {semesterRes}\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit(handleOnSubmit)}>\r\n        <div style={{ display: \"flex\" }}>\r\n          <div style={{ margin: \"21px\", fontSize: \"15px\", fontWeight: \"600\" }}>\r\n            +) Thay đổi kì đăng kí\r\n          </div>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"dense\"\r\n            style={{ marginTop: \"10px\" }}\r\n            {...register(\"semester\")}\r\n            placeholder=\"Nhập kì học\"\r\n            sx={{ width: 150 }}\r\n          />\r\n        </div>\r\n        <div>\r\n          <Button\r\n            style={{\r\n              width: \"200px\",\r\n              marginTop: \"40px\",\r\n              marginLeft: \"20px\",\r\n              fontWeight: \"400\",\r\n              background: \"rgb(235, 43, 43)\",\r\n              color: \"white\",\r\n            }}\r\n            variant=\"contained\"\r\n            type=\"submit\"\r\n          >\r\n            Thiết lập kì học\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n"],"sourceRoot":""}