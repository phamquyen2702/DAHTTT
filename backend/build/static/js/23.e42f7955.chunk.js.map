{"version":3,"sources":["component/quanlyhocphan/thietlapdangki.jsx"],"names":["Thietlapdangki","enqueueSnackbar","useSnackbar","schema","yup","shape","form","useForm","defaultValues","start_time","end_time","resolver","yupResolver","register","handleSubmit","setValue","useEffect","fetchOte","a","subjectApi","getOte","data","handleOnSubmit","value","updateOte","variant","className","style","fontSize","onSubmit","margin","id","label","type","sx","width","InputLabelProps","shrink","marginLeft","marginTop","fontWeight","background","color","Thietlapkihoc","useState","semesterRes","setSemesterRes","semesterUpdate","setSemesterUpdate","semester","getSemesterRegister","params","updateSemesterRegister","reset","display","placeholder"],"mappings":"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","file":"static/js/23.e42f7955.chunk.js","sourcesContent":["import { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport { Button, TextField } from \"@material-ui/core\";\r\nimport { useSnackbar } from \"notistack\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport * as yup from \"yup\";\r\nimport subjectApi from \"../../api/subjectApi\";\r\nimport \"../style2.css\";\r\n// function convertTime(a) {\r\n//   let date = a.slice(0, 10);\r\n//   let end_time = a.slice(13, 16);\r\n//   let firt_time = a.slice(11, 13);\r\n//   if (parseInt(firt_time) < 12) {\r\n//     return date + \"T\" + firt_time + end_time;\r\n//   } else {\r\n//     return date + \"T\" + (24 - firt_time) + end_time;\r\n//   }\r\n// }\r\nfunction Thietlapdangki() {\r\n  const { enqueueSnackbar } = useSnackbar();\r\n  const schema = yup.object().shape({});\r\n  const form = useForm({\r\n    defaultValues: {\r\n      start_time: \"2017-05-24T10:30\",\r\n      end_time: \"2017-05-24T10:30\",\r\n    },\r\n    resolver: yupResolver(schema),\r\n  });\r\n  const { register, handleSubmit, setValue } = form;\r\n\r\n  useEffect(() => {\r\n    const fetchOte = async () => {\r\n      const data = await subjectApi.getOte();\r\n      setValue(\"start_time\", `${data.start_time}`);\r\n      setValue(\"end_time\", `${data.end_time}`);\r\n    };\r\n    fetchOte();\r\n  }, [setValue]);\r\n  const handleOnSubmit = async (value) => {\r\n    try {\r\n      const data = await subjectApi.updateOte(value);\r\n      if (data === true) {\r\n        enqueueSnackbar(\"success\", {\r\n          variant: \"success\",\r\n        });\r\n      }\r\n    } catch (error) {\r\n      enqueueSnackbar(\"Error\", {\r\n        variant: \"error\",\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"thongtincanhan\">\r\n      <div className=\"thongtincanhan-title\" style={{ fontSize: \"15px\" }}>\r\n        1. Thiết lập thời gian đăng kí học tập\r\n      </div>\r\n      <form onSubmit={handleSubmit(handleOnSubmit)}>\r\n        <div style={{ margin: \"20px\" }}>\r\n          <TextField\r\n            {...register(\"start_time\")}\r\n            id=\"datetime-local\"\r\n            label=\"Thời gian bắt đầu\"\r\n            type=\"datetime-local\"\r\n            sx={{ width: 250 }}\r\n            InputLabelProps={{\r\n              shrink: true,\r\n            }}\r\n          />\r\n          <TextField\r\n            style={{ marginLeft: \"70px\" }}\r\n            {...register(\"end_time\")}\r\n            id=\"datetime-local\"\r\n            label=\"Thời gian kết thúc\"\r\n            type=\"datetime-local\"\r\n            sx={{ width: 250 }}\r\n            InputLabelProps={{\r\n              shrink: true,\r\n            }}\r\n          />\r\n        </div>\r\n        <div>\r\n          <Button\r\n            style={{\r\n              width: \"200px\",\r\n              marginTop: \"40px\",\r\n              marginLeft: \"20px\",\r\n              fontWeight: \"400\",\r\n              background: \"rgb(235, 43, 43)\",\r\n              color: \"white\",\r\n            }}\r\n            variant=\"contained\"\r\n            type=\"submit\"\r\n          >\r\n            Thiết lập thời gian\r\n          </Button>\r\n        </div>\r\n      </form>\r\n      <Thietlapkihoc></Thietlapkihoc>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Thietlapdangki;\r\n\r\nexport const Thietlapkihoc = () => {\r\n  const [semesterRes, setSemesterRes] = useState(0);\r\n  const [semesterUpdate, setSemesterUpdate] = useState();\r\n  const { enqueueSnackbar } = useSnackbar();\r\n  const schema = yup.object().shape({});\r\n  const form = useForm({\r\n    defaultValues: {\r\n      semester: \"\",\r\n    },\r\n    resolver: yupResolver(schema),\r\n  });\r\n  const { register, handleSubmit } = form;\r\n\r\n  useEffect(() => {\r\n    const fetchOte = async () => {\r\n      const data = await subjectApi.getSemesterRegister();\r\n      setSemesterRes(data);\r\n    };\r\n    fetchOte();\r\n  }, [semesterUpdate]);\r\n  const handleOnSubmit = async (value) => {\r\n    try {\r\n      const params = {\r\n        semester: value.semester,\r\n      };\r\n      const data = await subjectApi.updateSemesterRegister(params);\r\n      if (data === true) {\r\n        setSemesterUpdate(value.semester);\r\n        form.reset();\r\n        enqueueSnackbar(\"success\", {\r\n          variant: \"success\",\r\n        });\r\n      }\r\n    } catch (error) {\r\n      enqueueSnackbar(\"Error\", {\r\n        variant: \"error\",\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"thongtincanhan\">\r\n      <div className=\"thongtincanhan-title\" style={{ fontSize: \"15px\" }}>\r\n        2. Thiết lập kì học đăng kí\r\n      </div>\r\n      <div style={{ margin: \"21px\", fontSize: \"15px\", fontWeight: \"600\" }}>\r\n        +) Kì đăng kí hiện tại là {semesterRes}\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit(handleOnSubmit)}>\r\n        <div style={{ display: \"flex\" }}>\r\n          <div style={{ margin: \"21px\", fontSize: \"15px\", fontWeight: \"600\" }}>\r\n            +) Thay đổi kì đăng kí\r\n          </div>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"dense\"\r\n            style={{ marginTop: \"10px\" }}\r\n            {...register(\"semester\")}\r\n            placeholder=\"Nhập kì học\"\r\n            sx={{ width: 150 }}\r\n          />\r\n        </div>\r\n        <div>\r\n          <Button\r\n            style={{\r\n              width: \"200px\",\r\n              marginTop: \"40px\",\r\n              marginLeft: \"20px\",\r\n              fontWeight: \"400\",\r\n              background: \"rgb(235, 43, 43)\",\r\n              color: \"white\",\r\n            }}\r\n            variant=\"contained\"\r\n            type=\"submit\"\r\n          >\r\n            Thiết lập kì học\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n"],"sourceRoot":""}